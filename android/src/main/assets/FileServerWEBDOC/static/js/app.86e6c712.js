(function(e){function t(t){for(var a,l,o=t[0],r=t[1],d=t[2],f=0,p=[];f<o.length;f++)l=o[f],Object.prototype.hasOwnProperty.call(s,l)&&s[l]&&p.push(s[l][0]),s[l]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);c&&c(t);while(p.length)p.shift()();return n.push.apply(n,d||[]),i()}function i(){for(var e,t=0;t<n.length;t++){for(var i=n[t],a=!0,o=1;o<i.length;o++){var r=i[o];0!==s[r]&&(a=!1)}a&&(n.splice(t--,1),e=l(l.s=i[0]))}return e}var a={},s={app:0},n=[];function l(t){if(a[t])return a[t].exports;var i=a[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,l),i.l=!0,i.exports}l.m=e,l.c=a,l.d=function(e,t,i){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(l.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(i,a,function(t){return e[t]}.bind(null,a));return i},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=t,o=o.slice();for(var d=0;d<o.length;d++)t(o[d]);var c=r;n.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"084d":function(e,t,i){},"19b7":function(e,t,i){},"20f3":function(e,t,i){},2403:function(e,t,i){"use strict";i("20f3")},"2d17":function(e,t,i){"use strict";i("084d")},4004:function(e,t,i){},"4d94":function(e,t,i){},"56d7":function(e,t,i){"use strict";i.r(t);i("3b18");var a=i("f64c"),s=(i("55ec"),i("a79d")),n=(i("c119"),i("d865")),l=(i("7f6b"),i("8592")),o=(i("5704"),i("b558")),r=(i("cd17"),i("ed3b")),d=(i("5136"),i("681b")),c=(i("dd48"),i("2fc4")),f=(i("ee00"),i("bb76")),p=(i("0032"),i("e32c")),u=(i("de6a"),i("9a63")),h=(i("d88f"),i("fe2b")),m=(i("6ba6"),i("5efb")),v=(i("8fb1"),i("0c63")),g=(i("fbd8"),i("55f1")),b=(i("1a62"),i("98c5")),k=(i("cadf"),i("551c"),i("f751"),i("097d"),i("2b0e")),y=function(){var e=this,t=e._self._c;return t("a-layout",{staticClass:"g-container"},[t("a-layout-sider",{staticClass:"sider",class:{break:e.breakpoint},attrs:{breakpoint:"xs",collapsedWidth:"0",theme:e.theme,trigger:null,collapsed:e.cancollapse},on:{breakpoint:e.onBreakpoint}},[t("nav-menu"),e.breakpoint?t("div",{staticClass:"trigger",on:{click:function(t){e.isfold=!e.isfold}}},[t("a-icon",{staticClass:"icon",attrs:{type:"menu-fold"}})],1):e._e()],1),t("router-view",{attrs:{breakpoint:e.breakpoint}})],1)},x=[],w=function(){var e=this,t=e._self._c;return t("a-menu",{attrs:{defaultSelectedKeys:["1"],mode:"vertical",theme:e.theme,selectedKeys:[e.getcurrent]},on:{click:e.handleClick}},[t("a-menu-item",{key:"1"},[t("router-link",{attrs:{to:"/"}},[e._v("Upload")])],1),t("a-menu-item",{key:"2"},[t("router-link",{attrs:{to:"/manage"}},[e._v("Manage")])],1),t("a-menu-item",{key:"3"},[t("router-link",{attrs:{to:"/settings"}},[e._v("Setting")])],1)],1)},_=[],L={name:"NavMenu",data:function(){return{current:"1",theme:"dark"}},computed:{getcurrent:function(){switch(this.$route.path){case"/":return"1";case"/manage":return document.title="Manage","2";case"/settings":return document.title="Settings","3"}}},methods:{handleClick:function(e){this.current=e.key}}},C=L,O=i("2877"),D=Object(O["a"])(C,w,_,!1,null,null,null),S=D.exports,M={name:"App",components:{NavMenu:S},data:function(){return{theme:"dark",breakpoint:!1,isfold:!0}},computed:{cancollapse:function(){return!!this.breakpoint&&!!this.isfold}},methods:{onBreakpoint:function(e){this.breakpoint=e}}},j=M,F=(i("cdc2"),Object(O["a"])(j,y,x,!1,null,null,null)),$=F.exports,z=i("bc3a"),P=i.n(z),B=i("8c4f"),I=function(){var e=this,t=e._self._c;return t("a-layout",[t("a-layout-header",{staticClass:"g-header"},[t("my-progress",{class:[e.breakpoint?"progressbreak":"progress"],attrs:{percent:e.needpersent,subpercent:e.usedpersent,strokeWidth:8}}),t("input",{ref:"inputfile",staticStyle:{display:"nono",width:"0px",height:"0px"},attrs:{type:"file",multiple:"multiple"},on:{change:e.inputfile}}),t("div",{ref:"uploadarea",staticClass:"g-uploadarea"},[t("a-button",{ref:"uploadbtn",staticClass:"g-upload",attrs:{type:"dashed",size:e.size,block:""},on:{click:e.choosefile}},[t("p",{staticClass:"g-upload-drag-icon"},[t("a-icon",{staticClass:"icon",attrs:{type:"inbox"}})],1),t("p",{staticClass:"g-upload-text"},[e._v("Click or Drag file to this area to upload")]),t("p",{staticClass:"g-upload-hint"},[e._v("Support for multiple files")])])],1)],1),t("a-layout-footer",{staticClass:"g-footer"},[t("a-button",{attrs:{icon:"upload",size:e.size,block:""},on:{click:e.uploadfile}},[e._v("Upload All")])],1),t("a-layout-content",{staticClass:"g-content"},[t("a-list",e._l(e.fileList,(function(i,a){return t("upload-item",{key:i.file.lastModified+""+a,attrs:{itemdata:i,index:a,disable:e.disable},on:{removefile:e.removefile}})})),1)],1)],1)},U=[],N=(i("28a5"),i("7f7f"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"uploaditem"},[t("a-row",{attrs:{type:"flex",justify:"space-around",align:"middle"}},[t("a-col",{staticClass:"name",attrs:{xs:5}},[e._v(e._s(this.itemdata.file.name))]),t("a-col",{staticClass:"type",attrs:{xs:4}},[e._v(e._s(this.itemdata.info.type))]),t("a-col",{attrs:{xs:12,sm:14}},[t("my-progress",{attrs:{percent:this.itemdata.info.progress,subpercent:"sub"==this.itemdata.info.status?100:0,errpercent:"err"==this.itemdata.info.status?100:0,strokeWidth:8}})],1),t("a-col",{staticStyle:{"text-align":"center"},attrs:{xs:3,sm:1}},[t("a-button",{attrs:{shape:"circle",icon:"close",size:"small",disabled:this.disable},on:{click:function(t){return e.removefile(e.index)}}})],1)],1)],1)}),T=[],R=(i("c5f6"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"progress-container"},[t("div",{staticClass:"progress-pg",style:{width:this.percent+"%",height:this.strokeWidth+"px"}}),""!=this.subpercent?t("div",{staticClass:"progress-subpg",style:{width:this.subpercent+"%",height:this.strokeWidth+"px"}}):e._e(),""!=this.errpercent?t("div",{staticClass:"progress-errpg",style:{width:this.errpercent+"%",height:this.strokeWidth+"px"}}):e._e()])}),E=[],W={name:"MyProgress",data:function(){return{}},props:{percent:Number,subpercent:Number,errpercent:Number,strokeWidth:Number}},K=W,A=(i("c1e6"),Object(O["a"])(K,R,E,!1,null,null,null)),G=A.exports,J={name:"UploadItem",components:{MyProgress:G},data:function(){return{}},props:{itemdata:Object,disable:Boolean,index:Number},methods:{removefile:function(){this.$emit("removefile",this.index)}}},H=J,Y=(i("2d17"),Object(O["a"])(H,N,T,!1,null,null,null)),q=Y.exports,Q={name:"UploadPanel",components:{UploadItem:q,MyProgress:G},props:{breakpoint:Boolean},data:function(){return{size:"default",fileList:[],uploadindex:0,disable:!1,totalspace:0,usedspace:0,needspace:0,usedpersent:0,needpersent:0}},computed:{},watch:{fileList:function(){this.computesizepersent()},usedspace:function(){this.computesizepersent()}},mounted:function(){var e=this;this.$refs.uploadarea.ondragleave=function(e){e.preventDefault()},this.$refs.uploadarea.ondrop=function(t){t.preventDefault();var i=t.dataTransfer.files;if(!(i.length<1))for(var a=0;a<t.dataTransfer.files.length;a++)if(""!=t.dataTransfer.files[a].type){var s={file:null,info:{progress:0,status:"upload",type:""}},n=e.fileList.length;if(n<1)s.file=t.dataTransfer.files[a],s.info.type=e.getfiletype(t.dataTransfer.files[a].name),e.fileList.push(s);else{for(var l=!0,o=0;o<n;o++)if(t.dataTransfer.files[a].name==e.fileList[o].name&&t.dataTransfer.files[a].lastModified==e.fileList[o].lastModified){l=!1;break}l&&(s.file=t.dataTransfer.files[a],s.info.type=e.getfiletype(t.dataTransfer.files[a].name),e.fileList.push(s))}}},this.$refs.uploadarea.ondragenter=function(e){e.preventDefault()},this.$refs.uploadarea.ondragover=function(e){e.preventDefault()},this.getdiskinfo()},methods:{computesizepersent:function(){for(var e=this.fileList.length,t=this.fileList,i=0,a=0;a<e;a++)"upload"==t[a].info.status&&(i+=t[a].file.size);this.needspace=this.usedspace+i,this.needspace>this.totalspace?(this.needpersent=100,this.$message.error("File uploaded too large.",10)):this.needpersent=this.needspace/this.totalspace*100,this.usedpersent=this.usedspace/this.totalspace*100},getdiskinfo:function(){var e=this;this.axios.post("/api/getdiskinfo").then((function(t){e.usedspace=t.data.usedspace,e.totalspace=t.data.totalspace}))},getfiletype:function(e){return e.split(".").pop().toLowerCase()},inputfile:function(){var e=this.$refs.inputfile.files;if(!(e.length<1)){for(var t=0;t<e.length;t++)if(""!=e[t].type){var i={file:null,info:{progress:0,status:"upload",type:""}},a=this.fileList.length;if(a<1)i.file=e[t],i.info.type=this.getfiletype(e[t].name),this.fileList.push(i);else{for(var s=!0,n=0;n<a;n++)if(e[t].name==this.fileList[n].name&&e[t].lastModified==this.fileList[n].lastModified){s=!1;break}s&&(i.file=e[t],i.info.type=this.getfiletype(e[t].name),this.fileList.push(i))}}this.$refs.inputfile.value=""}},choosefile:function(){this.$refs.inputfile.dispatchEvent(new MouseEvent("click"))},removefile:function(e){e<=this.uploadindex&&0!=this.uploadindex&&this.uploadindex--,this.fileList.splice(e,1)},uploadfile:function(){var e=this;if(this.fileList.length>0&&this.fileList.length>this.uploadindex){this.disable=!0;var t={headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(t){var i=t.loaded/t.total*100|0;e.fileList[e.uploadindex].info.progress=i}},i=new FormData;i.append("uploadfile",this.fileList[this.uploadindex].file,this.fileList[this.uploadindex].file.name),this.axios.post("/upload",i,t).then((function(t){e.fileList[e.uploadindex].info.status="sub",e.uploadindex++,e.uploadindex<e.fileList.length?e.uploadfile():e.disable=!1,e.getdiskinfo()})).catch((function(t){e.fileList[e.uploadindex].info.status="err",e.uploadindex++,e.$message.error("Upload failed,network error or server is down!",5),e.uploadindex<e.fileList.length?e.uploadfile():e.disable=!1}))}else alert("No file to upload!")}}},V=Q,X=(i("2403"),Object(O["a"])(V,I,U,!1,null,null,null)),Z=X.exports,ee=function(){var e=this,t=e._self._c;return t("a-layout",[t("a-layout-header",{staticClass:"g-header"},[t("my-progress",{staticClass:"progress",class:[e.breakpoint?"progressbreak":"progress"],attrs:{percent:e.computediskinfo,strokeWidth:8}}),t("a-row",{staticStyle:{"line-height":"1.5"}},[t("a-col",{attrs:{xs:12}},[t("a-button-group",[t("a-button",{attrs:{type:"primary",icon:"check"},on:{click:e.checkAll}}),t("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){e.mkdirvisible=!e.mkdirvisible}}},[e._v(e._s(e.breakpoint?"":"New Folder"))]),t("a-modal",{attrs:{title:"New Folder",confirmLoading:e.mkdirconfirmLoading,okButtonProps:{props:{disabled:e.mkdirOkdisable}},maskClosable:!1},on:{ok:e.handlemkdirOk,cancel:function(t){e.mkdirname=""}},model:{value:e.mkdirvisible,callback:function(t){e.mkdirvisible=t},expression:"mkdirvisible"}},[t("a-input",{ref:"dirinput",attrs:{placeholder:"Name of new folder"},on:{change:e.checkdirname,blur:e.checkdirname},model:{value:e.mkdirname,callback:function(t){e.mkdirname=t},expression:"mkdirname"}}),e.mkdirtipsvisible?t("p",{staticStyle:{color:"red"}},[e._v("Please input correct folder name")]):e._e()],1)],1)],1),t("a-col",{attrs:{xs:12}},[t("div",{staticStyle:{float:"right"}},[t("a-button-group",[t("a-button",{attrs:{type:"primary",icon:"cloud-upload"},on:{click:function(t){e.uploadvisible=!0}}}),t("a-modal",{staticClass:"uploadmodal",attrs:{title:"Upload File",confirmLoading:e.uploadconfirmLoading},on:{ok:e.uploadfileOk,cancel:e.cancelupload},model:{value:e.uploadvisible,callback:function(t){e.uploadvisible=t},expression:"uploadvisible"}},[t("div",[t("input",{ref:"inputfile",staticStyle:{display:"nono",width:"0px",height:"0px"},attrs:{type:"file"},on:{change:e.inputfile}}),t("a-button",{attrs:{disabled:e.uploadbtndisable},on:{click:e.chooseuploadfile}},[t("a-icon",{attrs:{type:"upload"}}),e._v("Upload\n                ")],1),t("span",[e._v(e._s(null==e.uploadfile?"No File Selected":e.uploadfile.name))])],1),t("p",[e._v("File will upload in current folder")]),t("p",[e._v("Upload only one file at a time")])]),t("a-button",{attrs:{type:"primary",icon:"cloud-download"},on:{click:e.downloadselectfile}}),t("a-modal"),t("a-button",{attrs:{type:"primary",icon:"delete"},on:{click:function(t){e.delfilevisible=!0}}}),t("a-modal",{attrs:{title:"Confirm",confirmLoading:e.delfileconfirmLoading},on:{ok:e.removeAllSelectFile},model:{value:e.delfilevisible,callback:function(t){e.delfilevisible=t},expression:"delfilevisible"}},[t("p",[e._v("Be sure to delete the selected files and folders")])])],1)],1)])],1),t("a-row",{staticClass:"filepanel",attrs:{type:"flex",justify:"space-around",align:"middle"}},[t("a-col",{attrs:{xs:15,sm:11}},[e._v("File Name")]),t("a-col",{attrs:{xs:6}},[e._v("File Size")]),t("a-col",{attrs:{xs:0,sm:6}},[e._v("Last Modified")]),t("a-col",{staticStyle:{"text-align":"center"},attrs:{xs:3,sm:1}},[e._v("More")])],1)],1),t("a-layout-content",{staticClass:"g-content"},[t("a-spin",{attrs:{spinning:e.spinning}},[t("a-icon",{staticStyle:{"font-size":"24px"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"}),e.hasPerent?t("file-item",{attrs:{type:"perent"},nativeOn:{click:function(t){return e.backPerent.apply(null,arguments)}}}):e._e(),e._l(e.diritem,(function(i,a){return t("file-item",{key:i+""+a,attrs:{itemdata:i,index:a,type:"folder",breakpoint:e.breakpoint,ischecked:e.isChecked("folder",a)},on:{chooseFileItem:e.chooseFileItem,ddelfile:e.showdelmodal,removefile:e.showremovemodal,renamefile:e.showrenamemodal,downloadfile:e.downloadfile,openfile:e.openfile},nativeOn:{click:function(t){return e.viewDir(i)}}})})),e._l(e.fileitem,(function(i,a){return t("file-item",{key:i.size+""+a,attrs:{index:a,itemdata:i,type:"file",breakpoint:e.breakpoint,ischecked:e.isChecked("file",a)},on:{chooseFileItem:e.chooseFileItem,ddelfile:e.showdelmodal,removefile:e.showremovemodal,renamefile:e.showrenamemodal,downloadfile:e.downloadfile,openfile:e.openfile}})}))],2),t("a-modal",{attrs:{title:"Delete File",confirmLoading:e.ddelfileconfirmLoading,maskClosable:!1},on:{ok:e.ddelfileOK,cancel:e.cancelddel},model:{value:e.ddelfilevisible,callback:function(t){e.ddelfilevisible=t},expression:"ddelfilevisible"}},[t("p",[e._v("Be sure to delete")]),t("p",[e._v(e._s(e.getddfilename))])]),t("a-modal",{attrs:{title:"Move file",confirmLoading:e.removefileconfirmLoading,okButtonProps:{props:{disabled:e.hasremoveselect}}},on:{ok:e.removefileOk,cancel:e.cancelremove},model:{value:e.removefilevisible,callback:function(t){e.removefilevisible=t},expression:"removefilevisible"}},[t("p",[e._v(e._s(e.getddfilename))]),t("a-tree",{attrs:{loadData:e.onLoadData,treeData:e.treeData},on:{select:e.selecttodir}})],1),t("a-modal",{attrs:{title:"File Rename",confirmLoading:e.renamefileconfirmLoading,okButtonProps:{props:{disabled:e.renameOkdisable}},maskClosable:!1},on:{ok:e.renamefileOk,cancel:e.cancelrename},model:{value:e.renamefilevisible,callback:function(t){e.renamefilevisible=t},expression:"renamefilevisible"}},[t("p",[e._v(e._s(e.getddfilename))]),t("a-input",{attrs:{placeholder:"New File Name"},on:{change:e.checkfilename,blur:e.checkfilename},model:{value:e.renamename,callback:function(t){e.renamename=t},expression:"renamename"}}),e.renametipsvisible?t("p",[e._v("Please enter a valid file name")]):e._e()],1)],1)],1)},te=[],ie=i("2909"),ae=function(){var e=this,t=e._self._c;return t("div",{staticClass:"fileitem"},[t("a-row",{attrs:{type:"flex",justify:"space-around",align:"middle"}},["perent"==e.type?t("span",{staticStyle:{float:"left"}},[t("a-icon",{attrs:{type:"up"}})],1):[t("a-col",{staticClass:"name",attrs:{xs:15,sm:11}},[t("a-checkbox",{attrs:{checked:e.ischecked},on:{change:e.choosefileitem,click:function(e){e.stopPropagation()}}}),t("a-icon",{staticStyle:{"font-size":"24px",margin:"0px 5px"},attrs:{theme:"filled",type:"file"==e.type?"file":"folder"}}),e._v("\n        "+e._s("file"==e.type?this.itemdata.name:this.itemdata)+"\n      ")],1),t("a-col",{staticClass:"size",attrs:{xs:6}},[e._v(e._s("file"==e.type?e.getfilesize:"-"))]),t("a-col",{attrs:{xs:0,sm:6}},[e._v(e._s("file"==e.type?e.gettime:"-"))]),t("a-col",{staticStyle:{"text-align":"center"},attrs:{xs:3,sm:1}},[t("a-popover",{attrs:{placement:"topRight"},model:{value:e.popover,callback:function(t){e.popover=t},expression:"popover"}},[t("template",{slot:"content"},[t("a-button-group",["file"==e.type?t("a-button",{attrs:{icon:"login",size:"small"},on:{click:e.openfile}},[e._v(e._s(e.breakpoint?"":"Open"))]):e._e(),t("a-button",{attrs:{icon:"rollback",size:"small"},on:{click:e.removefile}},[e._v(e._s(e.breakpoint?"":"Move"))]),t("a-button",{attrs:{icon:"edit",size:"small"},on:{click:e.renamefile}},[e._v(e._s(e.breakpoint?"":"Rename"))]),"file"==e.type?t("a-button",{attrs:{icon:"cloud-download",size:"small"},on:{click:e.downloadfile}},[e._v(e._s(e.breakpoint?"":"Download"))]):e._e(),t("a-button",{attrs:{icon:"delete",size:"small"},on:{click:e.ddelfile}},[e._v(e._s(e.breakpoint?"":"Delete"))])],1)],1),t("a-button",{attrs:{shape:"circle",icon:"ellipsis",size:"small"},on:{click:function(t){t.stopPropagation(),e.popover=!0}}})],2)],1)]],2)],1)},se=[],ne={name:"FileItem",data:function(){return{popover:!1}},props:{breakpoint:Boolean,itemdata:Object|String,type:String,show:Boolean,index:Number,ischecked:Boolean},computed:{getfilesize:function(){var e=this.itemdata.size,t="";return t=e<1048576?(e/1024).toFixed(2)+"KB":1048576==e?"1MB":e>1048576&&e<1073741824?(e/1048576).toFixed(2)+"MB":e>1048576&&1073741824==e?"1GB":e>1073741824&&e<1099511627776?(e/1073741824).toFixed(2)+"GB":"File Size >1TB",t},gettime:function(){var e=new Date(this.itemdata.time),t=e.getFullYear(),i=e.getMonth()+1,a=e.getDate(),s=e.getHours(),n=e.getMinutes();return i<10&&(i="0"+i),a<10&&(a="0"+a),s<10&&(s="0"+s),n<10&&(n="0"+n),t+"-"+i+"-"+a+" "+s+":"+n}},methods:{choosefileitem:function(e){this.$emit("chooseFileItem",this.type,this.index,e.target.checked)},ddelfile:function(){this.$emit("ddelfile",this.type,this.index)},renamefile:function(){this.$emit("renamefile",this.type,this.index)},removefile:function(){this.$emit("removefile",this.type,this.index)},downloadfile:function(){this.$emit("downloadfile",this.type,this.index)},openfile:function(){this.$emit("openfile",this.type,this.index)}}},le=ne,oe=(i("df67"),Object(O["a"])(le,ae,se,!1,null,null,null)),re=oe.exports,de={name:"Manage",components:{MyProgress:G,FileItem:re},props:{breakpoint:Boolean},data:function(){return{dirs:[],fileitem:[],diritem:[],mkdirname:"",mkdirvisible:!1,mkdirconfirmLoading:!1,mkdirtipsvisible:!1,mkdirOkdisable:!0,uploadfile:null,uploadvisible:!1,uploadconfirmLoading:!1,uploadbtndisable:!1,delfilevisible:!1,delfileconfirmLoading:!1,spinning:!1,selectdir:[],selectfile:[],ddelfilevisible:!1,ddelfileconfirmLoading:!1,renamefilevisible:!1,renamefileconfirmLoading:!1,renamename:"",renameOkdisable:!0,renametipsvisible:!1,removefilevisible:!1,removefileconfirmLoading:!1,hasremoveselect:!0,newpath:[],ddselecttype:"",ddselectindex:null,treeData:[],totalspace:0,usedspace:0}},computed:{hasPerent:function(){return!(this.dirs.length<=1)},getddfilename:function(){if(this.fileitem.length>0||this.diritem.length>0){if("file"===this.ddselecttype)return this.fileitem[this.ddselectindex].name;if("folder"===this.ddselecttype)return this.diritem[this.ddselectindex]}return"No file selected"},computediskinfo:function(){return this.usedspace/this.totalspace*100}},mounted:function(){var e=this;this.axios.post("/api/getuploaddirinfo").then((function(t){e.dirs=t.data.dirs,e.fileitem=t.data.allfileinfo.files,e.diritem=t.data.allfileinfo.directories})),this.getdiskinfo()},methods:{deletewarning:function(){},handlemkdirOk:function(){var e=this;this.mkdirconfirmLoading=!0;var t=this.$refs.dirinput.value;""==t?this.mkdirtipsvisible=!0:(this.mkdirtipsvisible=!1,this.axios.post("/api/mkdir",{path:this.dirs,dirname:t}).then((function(t){"suss"==t.data&&(e.mkdirvisible=!1),e.mkdirconfirmLoading=!1,e.mkdirname="",e.renewDirInfo()})))},checkdirname:function(e){/[\\/:\*\?"<>\|\.]/.test(this.mkdirname)||""===this.mkdirname?(this.mkdirtipsvisible=!0,this.mkdirOkdisable=!0):(this.mkdirtipsvisible=!1,this.mkdirOkdisable=!1)},backPerent:function(e){var t=this;this.dirs.pop(),this.spinning=!0,this.axios.post("/api/getdirectoryallinfo",{path:this.dirs}).then((function(e){t.fileitem=e.data.files||[],t.diritem=e.data.directories||[],t.spinning=!1,t.spinning=!1,t.selectdir=[],t.selectfile=[],t.ddselecttype="",t.ddselectindex=null})),this.getdiskinfo()},viewDir:function(e){var t=this;this.dirs.push(e),this.spinning=!0,this.axios.post("/api/getdirectoryallinfo",{path:this.dirs}).then((function(e){t.fileitem=e.data.files||[],t.diritem=e.data.directories||[],t.spinning=!1,t.selectdir=[],t.selectfile=[],t.ddselecttype="",t.ddselectindex=null})),this.getdiskinfo()},renewDirInfo:function(){var e=this;this.spinning=!0,this.axios.post("/api/getdirectoryallinfo",{path:this.dirs}).then((function(t){e.fileitem=t.data.files||[],e.diritem=t.data.directories||[],e.spinning=!1,e.ddselecttype="",e.ddselectindex=null})),this.getdiskinfo()},chooseFileItem:function(e,t,i){if("file"===e){var a=this.selectfile.length;if(i){for(var s=0;s<a;s++)if(this.selectfile[s]==t)return;this.selectfile.push(t)}else for(var n=0;n<this.selectfile.length;n++)this.selectfile[n]==t&&(this.selectfile.splice(n,1),n--)}if("folder"===e){var l=this.selectdir.length;if(i){for(var o=0;o<l;o++)if(this.selectdir[o]==t)return;this.selectdir.push(t)}else for(var r=0;r<this.selectdir.length;r++)this.selectdir[r]==t&&(this.selectdir.splice(r,1),r--)}},removeAllSelectFile:function(){for(var e=this,t=[],i=this.selectdir.length,a=0;a<i;a++)t.push(this.diritem[this.selectdir[a]]);i=this.selectfile.length;for(var s=0;s<i;s++)t.push(this.fileitem[this.selectfile[s]].name);this.delfileconfirmLoading=!0,this.axios.post("/api/delallfile",{path:this.dirs,names:t}).then((function(t){e.delfileconfirmLoading=!1,e.delfilevisible=!1,e.selectdir=[],e.selectfile=[],e.renewDirInfo()}))},chooseuploadfile:function(){this.$refs.inputfile.dispatchEvent(new MouseEvent("click"))},inputfile:function(){var e=this.$refs.inputfile.files;e.length<1||(this.uploadfile=e[0])},uploadfileOk:function(){var e=this;this.uploadconfirmLoading=!0,this.uploadbtndisable=!0;var t={headers:{"Content-Type":"multipart/form-data"}},i=new FormData;i.append("path",this.dirs),i.append("uploadfile",this.uploadfile,this.uploadfile.name),this.axios.post("/api/uploadtodir",i,t).then((function(t){e.uploadconfirmLoading=!1,e.uploadbtndisable=!1,e.uploadvisible=!1,e.$refs.inputfile.value="",e.uploadfile=null,e.renewDirInfo()}))},cancelupload:function(){this.$refs.inputfile.value="",this.uploadfile=null},isChecked:function(e,t){if("file"==e){for(var i=this.selectfile.length,a=0;a<i;a++)if(this.selectfile[a]===t)return!0}else if("folder"==e)for(var s=this.selectdir.length,n=0;n<s;n++)if(this.selectdir[n]===t)return!0;return!1},checkAll:function(){for(var e=this.diritem.length,t=0;t<e;t++)this.selectdir.push(t);e=this.fileitem.length;for(var i=0;i<e;i++)this.selectfile.push(i)},showremovemodal:function(e,t){this.ddselecttype=e,this.ddselectindex=t,this.treeData.push({title:this.dirs[0],key:"0"}),this.removefilevisible=!0},removefileOk:function(){var e=this;this.removefileconfirmLoading=!0,console.log(this.getddfilename),this.axios.post("/api/removeto",{oldpath:this.dirs,newpath:this.newpath,name:this.getddfilename}).then((function(t){e.removefileconfirmLoading=!1,e.removefilevisible=!1,e.treeData=[],e.hasremoveselect=!0,e.renewDirInfo()}))},cancelremove:function(){this.treeData=[]},onLoadData:function(e){for(var t=this,i=e.eventKey.split("-"),a=[],s=this.treeData,n=0;n<i.length;n++)a.push(s[parseInt(i[n])].title),s=s[parseInt(i[n])].children;return this.axios.post("/api/getdirs",{path:a}).then((function(i){if("fail"!=i.data){for(var a=[],s=0;s<i.data.length;s++)a.push({title:i.data[s],key:e.eventKey+"-"+s});e.dataRef.children=a,t.treeData=Object(ie["a"])(t.treeData)}}))},selecttodir:function(e,t){for(var i=e[0].split("-"),a=[],s=this.treeData,n=0;n<i.length;n++)a.push(s[parseInt(i[n])].title),s=s[parseInt(i[n])].children;this.newpath=a,this.hasremoveselect=!1},showdelmodal:function(e,t){this.ddelfilevisible=!0,this.ddselecttype=e,this.ddselectindex=t},ddelfileOK:function(){var e=this,t=[];"file"===this.ddselecttype?t.push(this.fileitem[this.ddselectindex].name):"folder"===this.ddselecttype&&t.push(this.diritem[this.ddselectindex]),this.ddelfileconfirmLoading=!0,this.axios.post("/api/delallfile",{path:this.dirs,names:t}).then((function(t){e.ddelfilevisible=!1,e.ddelfileconfirmLoading=!1,e.selectdir=[],e.selectfile=[],e.renewDirInfo()}))},cancelddel:function(){},showrenamemodal:function(e,t){this.renamefilevisible=!0,this.ddselecttype=e,this.ddselectindex=t},checkfilename:function(){/^\.|[\\/:\*\?"<>]|\.$/.test(this.renamename)?(this.renameOkdisable=!0,this.renametipsvisible=!0):(this.renametipsvisible=!1,this.renameOkdisable=!1)},renamefileOk:function(){var e=this;this.renamefileconfirmLoading=!0;var t="";"file"===this.ddselecttype?t=this.fileitem[this.ddselectindex].name:"folder"===this.ddselecttype&&(t=this.diritem[this.ddselectindex]),this.axios.post("/api/rename",{path:this.dirs,oldname:t,newname:this.renamename}).then((function(t){e.renamefilevisible=!1,e.renamefileconfirmLoading=!1,e.renameOkdisable=!1,e.renamename="",e.renametipsvisible=!1,e.selectdir=[],e.selectfile=[],e.renewDirInfo()}))},cancelrename:function(){this.renamename=""},downloadfile:function(e,t){this.ddselecttype=e,this.ddselectindex=t;var i=this.getddfilename;this.axios.post("/api/download",{path:this.dirs,name:this.getddfilename},{responseType:"blob"}).then((function(e){var t=new Blob([e.data],{type:"application/octet-stream"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=i,a.style.display="none;width:0px;height:0px",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,fileName)}))},openfile:function(e,t){var i=this;this.ddselecttype=e,this.ddselectindex=t,this.axios.post("/api/getfileinfo",{path:this.dirs,name:this.getddfilename}).then((function(e){if("fail"!=e.data){console.log(e.data);var t=document.createElement("a"),a="/api/openfile?id="+e.data.id+"&name="+i.getddfilename;t.style.display="none;width:0px;height:0px",t.href=a,t.target="_blank",document.body.appendChild(t),t.click(),URL.revokeObjectURL(t.href),document.body.removeChild(t)}}))},downloadselectfile:function(){var e=this;if(this.selectdir.length>0)this.$message.error("Can not download folder",5);else for(var t=this.selectfile,i=function(){var i=e.fileitem[parseInt(t[a])].name;e.axios.post("/api/download",{path:e.dirs,name:i},{responseType:"blob"}).then((function(e){var t=new Blob([e.data],{type:"application/octet-stream"});if("download"in document.createElement("a")){var a=document.createElement("a");a.download=i,a.style.display="none;width:0px;height:0px",a.href=URL.createObjectURL(t),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,fileName)}))},a=0;a<t.length;a++)i()},getdiskinfo:function(){var e=this;this.axios.post("/api/getdiskinfo").then((function(t){e.usedspace=t.data.usedspace,e.totalspace=t.data.totalspace}))}}},ce=de,fe=(i("c593"),Object(O["a"])(ce,ee,te,!1,null,null,null)),pe=fe.exports,ue=function(){var e=this,t=e._self._c;return t("a-layout-content",{staticClass:"settings-content"},[t("div",{staticClass:"settingpanel"},[t("a-divider",{attrs:{orientation:"left"}},[e._v("Storage")]),t("div",{staticClass:"settingitem"},[t("p",{staticClass:"title"},[e._v("Cache")]),t("a-button",{attrs:{icon:"delete"},on:{click:e.clearTempData}},[e._v("Clean Cache")])],1)],1)])},he=[],me={name:"Settings",data:function(){return{}},methods:{clearTempData:function(){var e=this;this.axios.post("/api/cleartempdata").then((function(t){"suss"==t.data&&e.$message.info("Clean Cache Success")}))}}},ve=me,ge=(i("d3f6"),Object(O["a"])(ve,ue,he,!1,null,"55322a12",null)),be=ge.exports;k["a"].use(B["a"]);var ke=new B["a"]({mode:"history",routes:[{path:"/",name:"uploadpanel",component:Z,meta:{title:"Upload"}},{path:"/manage",name:"manage",component:pe,meta:{title:"Manage"}},{path:"/settings",name:"settings",component:be,meta:{title:"Settings"}}]});k["a"].use(b["a"]),k["a"].use(g["a"]),k["a"].use(v["a"]),k["a"].use(m["a"]),k["a"].use(h["b"]),k["a"].use(u["a"]),k["a"].use(p["a"]),k["a"].use(f["a"]),k["a"].use(c["a"]),k["a"].use(d["a"]),k["a"].use(r["a"]),k["a"].use(o["a"]),k["a"].use(l["a"]),k["a"].use(n["a"]),k["a"].use(s["a"]),P.a.defaults.withCredentials=!0,k["a"].prototype.axios=P.a,k["a"].prototype.$message=a["a"],k["a"].config.productionTip=!1,new k["a"]({router:ke,render:function(e){return e($)}}).$mount("#app"),ke.beforeEach((function(e,t,i){e.meta.title&&(document.title=e.meta.title),i()}))},"654c":function(e,t,i){},a365:function(e,t,i){},c1e6:function(e,t,i){"use strict";i("4d94")},c593:function(e,t,i){"use strict";i("4004")},cdc2:function(e,t,i){"use strict";i("19b7")},d3f6:function(e,t,i){"use strict";i("a365")},df67:function(e,t,i){"use strict";i("654c")}});